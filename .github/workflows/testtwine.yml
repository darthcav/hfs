name: Test Twine
on:
  workflow_dispatch:
env:
  CARGO_TERM_COLOR: always
  RUST_MIN_STACK: 8388608
  CARGO_BUILD_JOBS: 1
  CARGO_PROFILE_DEV_DEBUG: 0
  PYTHON_VERSION: "3.11"

jobs:
  testtwine:
    name: Test Twine
    runs-on: [self-hosted, Linux]
    steps:
      - name: Debug environment
        run: |
          echo "Current user:"
          whoami
          echo "PATH:"
          echo $PATH
          echo "Which sh:"
          which sh
          echo "Which bash:"
          which bash
          echo "Checking if twine file exists:"
          ls -la /home/github/.local/share/pipx/venvs/twine/bin/twine
          echo "Head of twine:"
          head -3 /home/github/.local/share/pipx/venvs/twine/bin/twine
      - name: Test Twine
        run: | 
          export PATH="/home/github/.local/bin:$PATH"
          twine --version
